(this.webpackJsonpwebgentechlogies_assessment_frontend=this.webpackJsonpwebgentechlogies_assessment_frontend||[]).push([[0],{69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(18),r=a.n(s),o=a(4),l=a(3),i=a(14),d=a.n(i),u=a(16),p=a(20),b=a(21),j=a(22),h=a(24),m=a(23),g=a(9),O=a.n(g),v=a(13),f=a.n(v),x=a(1),w=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(b.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={email:"",password:""},e.handleChange=function(t){var a=t.target,c=a.name,n=a.value;e.setState(Object(p.a)({},c,n))},e.submit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};O()({url:"https://webgen-assessment-backend.herokuapp.com/authentication/login",method:"POST",data:a}).then(function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Success"),console.log(a),"success"===a.data.status?(alert("Login Successful"),localStorage.setItem("userId",a.data.userId),f.a.set("jwt",a.data.jwt,{expires:3}),e.props.history.push("/")):a.data.errors.email.length?(alert(a.data.errors.email),e.props.history.push("/register")):a.data.errors.password.length&&alert(a.data.errors.password);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("Internal server error"),alert("Internal Server Error. Please try again."),console.log(e)}))},e}return Object(j.a)(a,[{key:"render",value:function(){return console.log("state: ",this.state),Object(x.jsx)("div",{id:"login",children:Object(x.jsxs)("form",{onSubmit:this.submit,children:[Object(x.jsx)("p",{children:"Welcome to Webgen Technologies"}),Object(x.jsx)("input",{className:"form-control",type:"email",name:"email",id:"email",placeholder:"Enter Email",value:this.state.email,onChange:this.handleChange}),Object(x.jsx)("input",{className:"form-control",type:"password",name:"password",id:"password",placeholder:"Enter Password",value:this.state.password,onChange:this.handleChange}),Object(x.jsx)("button",{class:"btn btn-primary",children:"Submit"})]})})}}]),a}(c.Component),y=a(6),S=(a(37),a(12));var N=function(e){var t=n.a.useState(""),a=Object(y.a)(t,2),c=a[0],s=a[1],r=(Object(l.f)(),Object(S.b)()),i=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(c),O()({url:"https://webgen-assessment-backend.herokuapp.com/products/searchproduct",method:"POST",data:{searchGiven:c}}).then((function(e){console.log(e.data.payload),r({type:"SEARCH_PRODUCT",payload:e.data.payload})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("nav",{className:"navbar bg-dark navbar-expand-lg navbar-dark",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)(o.b,{to:"/",className:"navbar-brand ml-5",children:"LOGO"}),Object(x.jsx)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(x.jsx)("span",{class:"navbar-toggler-icon"})}),Object(x.jsx)("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(x.jsxs)("ul",{class:"navbar-nav ml-auto mb-2 mb-lg-0 flex-grow-1",children:[Object(x.jsx)("input",{class:"form-control me-2",type:"search",onChange:function(e){s(e.target.value)},placeholder:"Search",name:"searchGiven",value:c,"aria-label":"Search"}),Object(x.jsx)("button",{class:"btn",onClick:i,children:"Submit"}),Object(x.jsx)(o.b,{class:"btn",to:"/create",type:"submit",children:"Create"}),void 0===e.cookie?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{class:"nav-item d-flex",children:Object(x.jsx)(o.b,{class:"nav-link",to:"/login",children:"Login"})}),Object(x.jsx)("li",{class:"nav-item",children:Object(x.jsx)(o.b,{class:"nav-link",to:"/register",children:"Register"})})]}):Object(x.jsx)("li",{class:"nav-item",children:Object(x.jsx)("button",{class:"btn",onClick:function(){console.log("alert"),O()({url:"https://webgen-assessment-backend.herokuapp.com/authentication/logout",method:"POST"}).then((function(t){console.log(t),e.onload()}))},children:"Logout"})})]})})]})})};var k=function(){var e=Object(l.g)().id,t=Object(S.c)((function(e){return e})).find((function(t){return t._id===e}));console.log("peoduct page");var a=Object(l.f)();return Object(x.jsx)("div",{className:"product",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-6",children:Object(x.jsx)("img",{src:t.productImgUrl,alt:"Product",className:"img-fluid"})}),Object(x.jsxs)("div",{className:"col-md-6",children:[Object(x.jsx)("h1",{className:"title",children:t.productName}),Object(x.jsx)("p",{className:"companyName",children:t.companyName}),Object(x.jsxs)("h2",{children:["Rs. ",t.productPrice]}),Object(x.jsx)("p",{children:t.productTitle}),Object(x.jsx)(o.b,{className:"btn update me-2",to:"/update/".concat(t._id),children:"Update"}),Object(x.jsx)("button",{className:"btn delete",onClick:function(){console.log("is:",e);var c=f.a.get("jwt"),n={productId:t._id,userId:localStorage.getItem("userId"),jwt:c};O()({url:"https://webgen-assessment-backend.herokuapp.com/products/deleteproduct",method:"POST",data:n}).then((function(e){console.log(e),"success"===e.data.status?(console.log(e),alert("Successfully deleted"),a.push("/")):"invalid"===e.data.status?(console.log(e),alert(e.data.payload)):"failure"===e.data.status&&alert(e.data.payload)})).catch((function(e){console.log(e)}))},children:"Delete"})]})]})})};var C=function(e){var t=e.posts;return e.loading?Object(x.jsx)("h1",{children:"Loading.."}):Object(x.jsx)("div",{className:"row posts",children:t.map((function(e,t){return Object(x.jsx)("div",{className:"col-md-4",children:Object(x.jsxs)("div",{class:"card",children:[Object(x.jsx)("img",{src:e.productImgUrl,class:"card-img-top img-fluid",alt:"productImage"}),Object(x.jsxs)("div",{class:"card-body",children:[Object(x.jsxs)("h5",{class:"card-title",children:[e.productName," - ",e.companyName]}),Object(x.jsx)("p",{class:"card-text",children:e.productTitle}),Object(x.jsxs)("p",{class:"card-text",children:["Rs. ",e.productPrice]}),Object(x.jsx)(o.b,{to:"/product/".concat(e._id),className:"btn",children:"See More"})]})]})})}))})};var P=function(e){for(var t=e.page,a=e.totalPosts,c=e.paginate,n=[],s=1;s<=Math.ceil(a/t);s++)n.push(s);return Object(x.jsx)("nav",{className:"pagination navbar navbar-expand-lg ",children:Object(x.jsx)("ul",{className:"pagination",children:n.map((function(e,t){return Object(x.jsx)("li",{className:"page-item",children:Object(x.jsx)(o.b,{onClick:function(){return c(e)},to:"/",className:"page-link",children:e})})}))})})};function I(){var e=n.a.useState([]),t=Object(y.a)(e,2),a=t[0],s=t[1],r=n.a.useState(!1),o=Object(y.a)(r,2),l=o[0],i=o[1],p=n.a.useState(1),b=Object(y.a)(p,2),j=b[0],h=b[1],m=n.a.useState(6),g=Object(y.a)(m,2),v=g[0],w=(g[1],n.a.useState(f.a.get("jwt"))),k=Object(y.a)(w,2),I=k[0],T=k[1],E=Object(S.c)((function(e){return e})),_=Object(S.b)();Object(c.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!0),O()({url:"https://webgen-assessment-backend.herokuapp.com/products/getallproducts",method:"GET"}).then((function(e){var t=e.data;s(t.payload),console.log("data",t.payload),_({type:"LOAD_PRODUCT",payload:t.payload})})).catch((function(e){console.log("Error Retriving data"+e)})),i(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var D=j*v,U=D-v,R=E.slice(U,D);return Object(x.jsxs)("div",{className:"Home",children:[Object(x.jsx)(N,{onload:function(){console.log("calle"),T(void 0),f.a.remove("jwt"),localStorage.setItem("userId",""),console.log("cleared",I)},cookie:I}),Object(x.jsx)(C,{loading:l,posts:R}),E.length>6?Object(x.jsx)(P,{page:v,totalPosts:a.length,paginate:function(e){h(e)}}):null]})}a(69);var T=function(){var e=window.location.hash.split("/")[2],t=Object(S.c)((function(e){return e})).find((function(t){return t._id==e}));console.log("dass",t),console.log(window.location);var a=window.location.hash,c=n.a.useState("#/create"==a?"":t.productName),s=Object(y.a)(c,2),r=s[0],o=s[1],i=n.a.useState("#/create"==a?"":t.companyName),d=Object(y.a)(i,2),u=d[0],p=d[1],b=n.a.useState("#/create"==a?"":t.productTitle),j=Object(y.a)(b,2),h=j[0],m=j[1],g=n.a.useState("#/create"==a?"":t.productPrice),v=Object(y.a)(g,2),w=v[0],N=v[1],k=n.a.useState("#/create"==a?"":t.productImgUrl),C=Object(y.a)(k,2),P=C[0],I=C[1],T=(Object(S.b)(),Object(l.f)()),E=function(e){var t=e.target.name,a=e.target.value;switch(console.log(t,a),t){case"productName":o(a);break;case"CompanyName":p(a);break;case"productTitle":m(a);break;case"productPrice":N(a);break;case"productImgUrl":I(a)}};return Object(x.jsx)("div",{id:"login",children:Object(x.jsxs)("form",{children:[Object(x.jsx)("p",{children:"Create Product"}),Object(x.jsx)("input",{className:"form-control",type:"text",id:"productName",value:r,onChange:E,name:"productName",placeholder:"Enter Product Name"}),Object(x.jsx)("input",{className:"form-control",type:"url",name:"CompanyName",value:u,onChange:E,placeholder:"Enter Company Name"}),Object(x.jsx)("input",{className:"form-control",type:"text",name:"productTitle",value:h,onChange:E,placeholder:"Enter Product Title"}),Object(x.jsx)("input",{className:"form-control",type:"number",name:"productPrice",value:w,onChange:E,placeholder:"Enter Product Price"}),Object(x.jsx)("input",{className:"form-control",type:"url",name:"productImgUrl",value:P,onChange:E,placeholder:"Enter Product Url"}),Object(x.jsx)("button",{type:"button",onClick:function(){var e=f.a.get("jwt"),c=localStorage.getItem("userId"),n={productName:r,companyName:u,productTitle:h,productPrice:w,productImgUrl:P,jwt:e,productCreatedBy:c,productId:void 0==t?"":t._id};console.log(n);var s="#/create"==a?"https://webgen-assessment-backend.herokuapp.com/products/enterproduct":"https://webgen-assessment-backend.herokuapp.com/products/updateproduct";O()({url:s,method:"POST",data:n}).then((function(e){console.log(e),"success"===e.data.status?(console.log(e),alert("Successfully added"),T.push("/")):"invalid"===e.data.status?(console.log(e),alert(e.data.payload),T.push("/")):"failure"===e.data.status&&(alert(e.data.payload),T.push("/"))})).catch((function(e){console.log(e)}))},class:"btn btn-primary",children:"Submit"})]})})},E=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(b.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={email:"",password:""},e.handleChange=function(t){var a=t.target,c=a.name,n=a.value;e.setState(Object(p.a)({},c,n))},e.submit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};O()({url:"https://webgen-assessment-backend.herokuapp.com/authentication/signup",method:"POST",data:a}).then((function(t){console.log("Success"),console.log(t),"success"===t.data.status?(alert("Registration Successful"),f.a.set("jwt",t.data.jwt,{expires:3}),e.props.history.push("/")):t.data.errors.email.length?alert(t.data.errors.email):t.data.errors.password.length&&alert(t.data.errors.password)})).catch((function(e){console.log("Internal server error"),alert("Internal Server Error. Please try again."),console.log(e)}))},e}return Object(j.a)(a,[{key:"render",value:function(){return console.log("state: ",this.state),Object(x.jsx)("div",{id:"login",children:Object(x.jsxs)("form",{onSubmit:this.submit,children:[Object(x.jsx)("p",{children:"Welcome to Webgen Technologies"}),Object(x.jsx)("input",{className:"form-control",type:"email",name:"email",id:"email",placeholder:"Enter Email",value:this.state.email,onChange:this.handleChange}),Object(x.jsx)("input",{className:"form-control",type:"password",name:"password",id:"password",placeholder:"Enter Password",value:this.state.password,onChange:this.handleChange}),Object(x.jsx)("button",{class:"btn btn-primary",children:"Submit"})]})})}}]),a}(c.Component);function _(){return Object(x.jsx)(o.a,{children:Object(x.jsxs)(l.c,{children:[Object(x.jsx)(l.a,{exact:!0,path:"/login",component:w}),Object(x.jsx)(l.a,{exact:!0,path:"/",component:I}),Object(x.jsx)(l.a,{exact:!0,path:"/register",component:E}),Object(x.jsx)(l.a,{exact:!0,path:"/create",component:T}),Object(x.jsx)(l.a,{exact:!0,path:"/product/:id",component:k}),Object(x.jsx)(l.a,{exact:!0,path:"/update/:id",component:T})]})})}var D=a(27),U=a(39),R=[],A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PRODUCT":return e=t.payload;case"SEARCH_PRODUCT":return console.log(t.payload),e=t.payload;case"ADD_PRODUCT":return e.length>1?(e.push(t.payload),console.log(e),e):e;default:return e}},L=Object(D.createStore)(A,Object(U.composeWithDevTools)());r.a.render(Object(x.jsx)(S.a,{store:L,children:Object(x.jsx)(_,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.d9d3924f.chunk.js.map