(this.webpackJsonpwebgentechlogies_assessment_frontend=this.webpackJsonpwebgentechlogies_assessment_frontend||[]).push([[0],{69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(17),r=a.n(s),o=a(4),l=a(3),i=a(19),d=a(20),u=a(21),p=a(24),b=a(23),j=a(11),h=a.n(j),m=a(13),g=a.n(m),O=a(1),v=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleChange=function(t){var a=t.target,n=a.name,c=a.value;e.setState(Object(i.a)({},n,c))},e.submit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};h()({url:"https://webgen-assessment-backend.herokuapp.com/authentication/login",method:"POST",data:a}).then((function(t){console.log("Success"),console.log(t),"success"===t.data.status?(alert("Login Successful"),g.a.set("jwt",t.data.jwt,{expires:3}),e.props.history.push("/")):t.data.errors.email.length?alert(t.data.errors.email):t.data.errors.password.length&&alert(t.data.errors.password)})).catch((function(e){console.log("Internal server error"),alert("Internal Server Error. Please try again."),console.log(e)}))},e}return Object(u.a)(a,[{key:"render",value:function(){return console.log("state: ",this.state),Object(O.jsx)("div",{id:"login",children:Object(O.jsxs)("form",{onSubmit:this.submit,children:[Object(O.jsx)("p",{children:"Welcome to Webgen Technologies"}),Object(O.jsx)("input",{className:"form-control",type:"email",name:"email",id:"email",placeholder:"Enter Email",value:this.state.email,onChange:this.handleChange}),Object(O.jsx)("input",{className:"form-control",type:"password",name:"password",id:"password",placeholder:"Enter Password",value:this.state.password,onChange:this.handleChange}),Object(O.jsx)("button",{class:"btn btn-primary",children:"Submit"})]})})}}]),a}(n.Component),x=a(15),f=a.n(x),y=a(22),w=a(6),N=(a(37),a(12));var S=function(e){var t=c.a.useState(""),a=Object(w.a)(t,2),n=a[0],s=a[1],r=(Object(l.f)(),Object(N.b)()),i=function(){var e=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n),h()({url:"https://webgen-assessment-backend.herokuapp.com/products/searchproduct",method:"POST",data:{searchGiven:n}}).then((function(e){console.log(e.data.payload),r({type:"SEARCH_PRODUCT",payload:e.data.payload})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("nav",{className:"navbar bg-dark navbar-expand-lg navbar-dark",children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(o.b,{to:"/",className:"navbar-brand ml-5",children:"LOGO"}),Object(O.jsx)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(O.jsx)("span",{class:"navbar-toggler-icon"})}),Object(O.jsx)("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(O.jsxs)("ul",{class:"navbar-nav ml-auto mb-2 mb-lg-0 flex-grow-1",children:[Object(O.jsx)("input",{class:"form-control me-2",type:"search",onChange:function(e){s(e.target.value)},placeholder:"Search",name:"searchGiven",value:n,"aria-label":"Search"}),Object(O.jsx)("button",{class:"btn",onClick:i,children:"Submit"}),Object(O.jsx)(o.b,{class:"btn",to:"/create",type:"submit",children:"Create"}),void 0===e.cookie?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{class:"nav-item d-flex",children:Object(O.jsx)(o.b,{class:"nav-link",to:"/login",children:"Login"})}),Object(O.jsx)("li",{class:"nav-item",children:Object(O.jsx)(o.b,{class:"nav-link",to:"/register",children:"Register"})})]}):Object(O.jsx)("li",{class:"nav-item",children:Object(O.jsx)("button",{class:"btn",onClick:function(){console.log("alert"),h()({url:"https://webgen-assessment-backend.herokuapp.com/authentication/logout",method:"POST"}).then((function(t){console.log(t),e.onload()}))},children:"Logout"})})]})})]})})};var C=function(){var e=Object(l.g)().id,t=Object(N.c)((function(e){return e})).find((function(t){return t._id===e}));return Object(O.jsx)("div",{className:"product",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-md-6",children:Object(O.jsx)("img",{src:t.productImgUrl,alt:"Product",className:"img-fluid"})}),Object(O.jsxs)("div",{className:"col-md-6",children:[Object(O.jsx)("h1",{className:"title",children:t.productName}),Object(O.jsx)("p",{className:"companyName",children:t.companyName}),Object(O.jsxs)("h2",{children:["Rs. ",t.productPrice]}),Object(O.jsx)("p",{children:t.productTitle})]})]})})};var k=function(e){var t=e.posts;return e.loading?Object(O.jsx)("h1",{children:"Loading.."}):Object(O.jsx)("div",{className:"row posts",children:t.map((function(e,t){return Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{class:"card",children:[Object(O.jsx)("img",{src:e.productImgUrl,class:"card-img-top img-fluid",alt:"productImage"}),Object(O.jsxs)("div",{class:"card-body",children:[Object(O.jsxs)("h5",{class:"card-title",children:[e.productName," - ",e.companyName]}),Object(O.jsx)("p",{class:"card-text",children:e.productTitle}),Object(O.jsxs)("p",{class:"card-text",children:["Rs. ",e.productPrice]}),Object(O.jsx)(o.b,{to:"/product/".concat(e._id),className:"btn",children:"See More"})]})]})})}))})};var P=function(e){for(var t=e.page,a=e.totalPosts,n=e.paginate,c=[],s=1;s<=Math.ceil(a/t);s++)c.push(s);return Object(O.jsx)("nav",{className:"pagination navbar navbar-expand-lg ",children:Object(O.jsx)("ul",{className:"pagination",children:c.map((function(e,t){return Object(O.jsx)("li",{className:"page-item",children:Object(O.jsx)(o.b,{onClick:function(){return n(e)},to:"/",className:"page-link",children:e})})}))})})};function T(){var e=c.a.useState([]),t=Object(w.a)(e,2),a=t[0],s=t[1],r=c.a.useState(!1),o=Object(w.a)(r,2),l=o[0],i=o[1],d=c.a.useState(1),u=Object(w.a)(d,2),p=u[0],b=u[1],j=c.a.useState(6),m=Object(w.a)(j,2),v=m[0],x=(m[1],c.a.useState(g.a.get("jwt"))),C=Object(w.a)(x,2),T=C[0],E=C[1],D=Object(N.c)((function(e){return e})),R=Object(N.b)();Object(n.useEffect)((function(){(function(){var e=Object(y.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!0),h()({url:"https://webgen-assessment-backend.herokuapp.com/products/getallproducts",method:"GET"}).then((function(e){var t=e.data;s(t.payload),console.log("data",t.payload),R({type:"LOAD_PRODUCT",payload:t.payload})})).catch((function(e){console.log("Error Retriving data"+e)})),i(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var I=p*v,U=I-v,_=D.slice(U,I);return Object(O.jsxs)("div",{className:"Home",children:[Object(O.jsx)(S,{onload:function(){console.log("calle"),E(void 0),g.a.remove("jwt"),console.log("cleared",T)},cookie:T}),Object(O.jsx)(k,{loading:l,posts:_}),D.length>6?Object(O.jsx)(P,{page:v,totalPosts:a.length,paginate:function(e){b(e)}}):null]})}a(69);var E=function(){var e=c.a.useState(""),t=Object(w.a)(e,2),a=t[0],n=t[1],s=c.a.useState(""),r=Object(w.a)(s,2),o=r[0],i=r[1],d=c.a.useState(""),u=Object(w.a)(d,2),p=u[0],b=u[1],j=c.a.useState(""),m=Object(w.a)(j,2),v=m[0],x=m[1],f=c.a.useState(""),y=Object(w.a)(f,2),S=y[0],C=y[1],k=(Object(N.b)(),Object(l.f)()),P=function(e){var t=e.target.name,a=e.target.value;switch(console.log(t,a),t){case"productName":n(a);break;case"CompanyName":i(a);break;case"productTitle":b(a);break;case"productPrice":x(a);break;case"productImgUrl":C(a)}};return Object(O.jsx)("div",{id:"login",children:Object(O.jsxs)("form",{children:[Object(O.jsx)("p",{children:"Create Product"}),Object(O.jsx)("input",{className:"form-control",type:"text",id:"productName",value:a,onChange:P,name:"productName",placeholder:"Enter Product Name"}),Object(O.jsx)("input",{className:"form-control",type:"url",name:"CompanyName",value:o,onChange:P,placeholder:"Enter Company Name"}),Object(O.jsx)("input",{className:"form-control",type:"text",name:"productTitle",value:p,onChange:P,placeholder:"Enter Product Title"}),Object(O.jsx)("input",{className:"form-control",type:"number",name:"productPrice",value:v,onChange:P,placeholder:"Enter Product Price"}),Object(O.jsx)("input",{className:"form-control",type:"url",name:"productImgUrl",value:S,onChange:P,placeholder:"Enter Product Url"}),Object(O.jsx)("button",{type:"button",onClick:function(){var e=g.a.get("jwt"),t={productName:a,companyName:o,productTitle:p,productPrice:v,productImgUrl:S,jwt:e};console.log(t),h()({url:"https://webgen-assessment-backend.herokuapp.com/products/enterproduct",method:"POST",data:t}).then((function(e){console.log(e),"success"===e.data.status?(console.log(e),alert("Successfully added"),k.push("/")):"invalid"===e.data.status&&(console.log(e),alert(e.data.payload),k.push("/register"))})).catch((function(e){console.log(e)}))},class:"btn btn-primary",children:"Submit"})]})})},D=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleChange=function(t){var a=t.target,n=a.name,c=a.value;e.setState(Object(i.a)({},n,c))},e.submit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};h()({url:"https://webgen-assessment-backend.herokuapp.com/authentication/signup",method:"POST",data:a}).then((function(t){console.log("Success"),console.log(t),"success"===t.data.status?(alert("Registration Successful"+t.data.jwt),g.a.set("jwt",t.data.jwt,{expires:3}),e.props.history.push("/")):t.data.errors.email.length?alert(t.data.errors.email):t.data.errors.password.length&&alert(t.data.errors.password)})).catch((function(e){console.log("Internal server error"),alert("Internal Server Error. Please try again."),console.log(e)}))},e}return Object(u.a)(a,[{key:"render",value:function(){return console.log("state: ",this.state),Object(O.jsx)("div",{id:"login",children:Object(O.jsxs)("form",{onSubmit:this.submit,children:[Object(O.jsx)("p",{children:"Welcome to Webgen Technologies"}),Object(O.jsx)("input",{className:"form-control",type:"email",name:"email",id:"email",placeholder:"Enter Email",value:this.state.email,onChange:this.handleChange}),Object(O.jsx)("input",{className:"form-control",type:"password",name:"password",id:"password",placeholder:"Enter Password",value:this.state.password,onChange:this.handleChange}),Object(O.jsx)("button",{class:"btn btn-primary",children:"Submit"})]})})}}]),a}(n.Component);function R(){return Object(O.jsx)(o.a,{children:Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{exact:!0,path:"/login",component:v}),Object(O.jsx)(l.a,{exact:!0,path:"/",component:T}),Object(O.jsx)(l.a,{exact:!0,path:"/register",component:D}),Object(O.jsx)(l.a,{exact:!0,path:"/create",component:E}),Object(O.jsx)(l.a,{exact:!0,path:"/product/:id",component:C})]})})}var I=a(27),U=a(39),_=[],A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PRODUCT":return e=t.payload;case"SEARCH_PRODUCT":return console.log(t.payload),e=t.payload;case"ADD_PRODUCT":return e.length>1?(e.push(t.payload),console.log(e),e):e;default:return e}},L=Object(I.createStore)(A,Object(U.composeWithDevTools)());r.a.render(Object(O.jsx)(N.a,{store:L,children:Object(O.jsx)(R,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.d676c063.chunk.js.map